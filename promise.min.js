/*
 * [promise.coffee](http://github.com/CodeCatalyst/promise.coffee) v1.0
 * Copyright (c) 2012-2013 [CodeCatalyst, LLC](http://www.codecatalyst.com/).
 * Open source under the [MIT License](http://en.wikipedia.org/wiki/MIT_License).
 */
(function(){var d,r,h,f,s,e;s=("undefined"!==typeof process&&null!==process?process.nextTick:void 0)||"undefined"!==typeof setImmediate&&null!==setImmediate||function(a){return setTimeout(a,0)};f=function(a){return"function"===typeof a};var t=function(a,c){var k,d,e,l,m,n,i,p,j,q,h;this.promise=new r(this);i=[];l=j=!1;m=n=null;f(c)||(c=function(b){throw b;});q=function(){var b,g,a;g=0;for(a=i.length;g<a;g++)b=i[g],b[m](n);i=[]};h=function(b){i.push(b);l&&q()};k=function(b,g){a=c=null;m=b;n=g;l=!0;
q()};e=function(b){k("resolve",b)};d=function(b){k("reject",b)};p=function(b,a){j=!0;try{f(b)&&(a=b(a)),a&&f(a.then)?a.then(e,d):e(a)}catch(c){d(c)}};this.resolve=function(b){j||p(a,b)};this.reject=function(a){j||p(c,a)};this.then=function(a,c){var d;return f(a)||f(c)?(d=new t(a,c),s(function(){return h(d)}),d.promise):this.promise}};h=t;r=function(a){this.then=function(c,d){return a.then(c,d)}};d=function(){var a;a=new h;this.promise=a.promise;this.resolve=function(c){return a.resolve(c)};this.reject=
function(c){return a.reject(c)}};e="undefined"!==typeof exports&&null!==exports?exports:window;e.Deferred=d;e.defer=function(){return new d}}).call(this);
